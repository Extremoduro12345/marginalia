{% extends 'base.html' %}

{% block content %}
<h1>{{ product.title }}</h1>

<div>
  <h2>Detalles de la creación</h2>
  <p>Título original: {{ product.creation.original_title }}</p>
  <p>Subtítulos, capítulos y entregas: {{ product.creation.subtitles }}</p>
  <p>Autoría: {{ product.creation.authorship }}</p>
  <p>Año de publicación: {{ product.creation.publication_year }}</p>
  <p>Sinopsis: {{ product.creation.synopsis }}</p>

  <h3>Países relacionados:</h3>
  <ul>
    {% for country in product.creation.paises.all %}
    <li>{{ country.name }}</li>
    {% endfor %}
  </ul>

  <h3>Palabras clave:</h3>
  <ul>
    {% for keyword in product.creation.palabras_clave.all %}
    <li>{{ keyword.name }}</li>
    {% endfor %}
  </ul>
</div>
  <!-- Agrega más detalles según sea necesario -->


<!-- HIPOTEXTO TERMINADO-->
{% if product.product_hipotext %}
<h2>Hipotexto</h2>
  {% if product.product_hipotext.hipotext_classic_sources.all %}
    <div>
      <h4>Fuentes Clásicas</h4>
      <ul>
        {% for classic_source in product.product_hipotext.hipotext_classic_sources.all %}
          <li><p>{{ classic_source.name|default:"" }} {{ classic_source.title|default:"" }} {{ classic_source.reference|default:""}}</p></li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
  {% if product.product_hipotext.hipotext_other_sources.all %}
    <div>
      <h4>Otras Fuentes</h4>
      <ul>
        {% for other_source in product.product_hipotext.hipotext_other_sources.all %}
          <li><p>{{ other_source.name|default:"" }} {{ other_source.title|default:"" }} {{ other_source.reference|default:"" }}</p></li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
  {% if product.product_hipotext.hipotext_documentary_sources.all %}
    <div>
      <h4>Fuentes Documentales</h4>
      <ul>
        {% for documentary_source in product.product_hipotext.hipotext_documentary_sources.all %}
          <li><p>{{ documentary_source.name|default:"" }} {{ documentary_source.title|default:"" }} {{documentary_source.reference|default:"" }}</p></li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
{% endif %}


<!-- PARATEXTO TERMINADO-->
  {% if product.product_paratext %}
    <div>
      <h2>Paratextos</h2>
      {% if product.product_paratext.introduction %}
        <strong>Introducción</strong>
        <p>{{ product.product_paratext.introduction }}</p>
      {% endif %}
      {% if product.product_paratext.prologue %}
        <strong>Prólogo</strong>
        <p>{{ product.product_paratext.prologue }}</p>
      {% endif %}
      {% if product.product_paratext.epilogue %}
        <strong>Epílogo</strong>
        <p>{{ product.product_paratext.epilogue }}</p>
      {% endif %}
      {% if product.product_paratext.notes %}
        <strong>Notas, citas, scholia varia, ...</strong>
        <p>{{ product.product_paratext.notes }}</p>
      {% endif %}

      {% if product.product_paratext.paratext_cover.all %}
        <div>
          <strong>Cartel portada, contraportada y carátula</strong>
        </div>
        {% for cover in product.product_paratext.paratext_cover.all %}
          <ul>
            {% if cover.image %}
              <img src="{{ cover.image }}" alt="{{ cover.description}} " style="max-width: 300px;">
            {% endif %}
            <p>{{ cover.description|default:"" }}</p>
          </ul>
        {% endfor %}
      {% endif %}
    
      {% if product.product_paratext.paratext_adstrailer.all %}
        <div>
          <strong>Anuncios y tráileres</strong>
        </div>
        {% for adstrailer in product.product_paratext.paratext_adstrailer.all %}
          <ul>
            {% if adstrailer.image %}
              <img src="{{ adstrailer.image }}" alt="{{ adstrailer.description}} " style="max-width: 300px;">
            {% endif %}
            <p>{{ adstrailer.description|default:"" }}</p>
            {% if adstrailer.videoclip %}
              <a href="{{ adstrailer.videoclip }}" target="_blank">Enlace al tráiler</a>
            {% endif %}
          </ul>
        {% endfor %}
      {% endif %}

      {% if product.product_paratext.paratext_extras.all %}
        <div>
          <strong>Extras</strong>
        </div>
        {% for extra in product.product_paratext.paratext_extras.all %}
          <ul>
            {% if extra.image %}
              <img src="{{ extra.image }}" alt="{{ extra.description}} " style="max-width: 300px;">
            {% endif %}
            <p>{{ extra.description|default:"" }}</p>
            {% if extra.videoclip %}
              <a href="{{ extra.videoclip }}" target="_blank">Enlace al extra</a>
            {% endif %}
          </ul>
        {% endfor %}
      {% endif %}

      {% if product.product_paratext.paratext_rulebook.all %}
        <div>
          <strong>Libros de reglas</strong>
        </div>
        {% for rulebook in product.product_paratext.paratext_rulebook.all %}
          <ul>
            {% if rulebook.image %}
              <img src="{{ rulebook.image }}" alt="{{ rulebook.description}} " style="max-width: 300px;">
            {% endif %}
            <p>{{ rulebook.description|default:"" }}</p>
          </ul>
        {% endfor %}
      {% endif %}
      {% if product.product_paratext.paratext_videoclip.all %}
        <div>
          <strong>Videoclips y actuaciones directo</strong>
        </div> 
        {% for videoclip in product.product_paratext.paratext_videoclip.all %}
          <ul>
            {% if videoclip.image %}
              <img src="{{ videoclip.image }}" alt="{{ videoclip.description}} " style="max-width: 300px;">
            {% endif %}
            <p>{{ videoclip.description|default:"" }}</p>
            {% if videoclip.videoclip %}
              <a href="{{ videoclip.videoclip }}" target="_blank">Enlace al videoclip</a>
            {% endif %}
          </ul>
        {% endfor %}
    {% endif %}
    </div>
  {% endif %}

  <!-- METATEXTOS TERMNINADO -->
  {% if product.product_metatext %}
    <div>
      <h2>Metatextos</h2>

      {% if product.product_metatext.metatext_declarations.all %}
        <div>
          <strong>Declaraciones autorizadas</strong>
        </div>
        {% for declaration in product.product_metatext.metatext_declarations.all %}
          <ul>
            <p>{{ declaration.description|default:"" }}</p>
            {% if declaration.link %}
              <a href="{{ declaration.link }}" target="_blank">Enlace a la declaración</a>
            {% endif %}
          </ul>
        {% endfor %}
      {% endif %}

      {% if product.product_metatext.metatext_criticism.all %}
        <div>
          <strong>Críticas</strong>
        </div>
        {% for criticism in product.product_metatext.metatext_criticism.all %}
          <ul>
            <p>{{ criticism.description|default:"" }}</p>
            {% if criticism.link %}
              <a href="{{ criticism.link }}" target="_blank">Enlace a la crítica</a>
            {% endif %}
          </ul>
        {% endfor %}
      {% endif %}

      {% if product.product_metatext.metatext_press_article.all %}
        <div>
          <strong>Críticas</strong>
        </div>
        {% for press_article in product.product_metatext.metatext_press_article.all %}
          <ul>
            <p>{{ press_article.description|default:"" }}</p>
            {% if press_article.link %}
              <a href="{{ press_article.link }}" target="_blank">Enlace al artículo</a>
            {% endif %}
          </ul>
        {% endfor %}
      {% endif %}

      {% if product.product_metatext.metatext_social_networks.all %}
        <div>
          <strong>Críticas</strong>
        </div>
        {% for social_network in product.product_metatext.metatext_social_networks.all %}
          <ul>
            <p>{{ social_network.description|default:"" }}</p>
            {% if social_network.link %}
              <a href="{{ social_network.link }}" target="_blank">Enlace</a>
            {% endif %}
          </ul>
        {% endfor %}
      {% endif %}

      {% if product.product_metatext.metatext_blogs.all %}
        <div>
          <strong>Blogs</strong>
        </div>
        {% for blog in product.product_metatext.metatext_blogs.all %}
          <ul>
            <p>{{ blog.description|default:"" }}</p>
            {% if blog.link %}
              <a href="{{ blog.link }}" target="_blank">Enlace</a>
            {% endif %}
          </ul>
        {% endfor %}
      {% endif %}

      {% if product.product_metatext.metatext_fandoms.all %}
        <div>
          <strong>Fandoms</strong>
        </div>
        {% for fandom in product.product_metatext.metatext_fandoms.all %}
          <ul>
            <p>{{ fandom.type|default:"" }}: {{ fandom.name|default:"" }}</p>
            {% if fandom.link %}
              <a href="{{ fandom.link }}" target="_blank">Enlace</a>
            {% endif %}
          </ul>
        {% endfor %}
      {% endif %}
    </div>
  {% endif %}


 
  <!-- TRASVASES MEDIALES -->
  <div>
    <h2>Trasvases mediales</h2>
    {% if product.product_medialTransfer %}
    <p>Hipertexto: {{ product.product_medialTransfer.hypertext|default:"" }}</p>
    {% if product.product_medialTransfer.transmediality %}
    <p>Transmediality: <a href="{% url 'creation-detail' pk=product.product_medialTransfer.transmediality.id %}">{{ product.product_medialTransfer.transmediality.title }}</a></p>
    {% else %}
    <p>Transmediality: No disponible</p>
    {% endif %}
    {% else %}
    <p>No hay información de trasvase medial disponible</p>
    {% endif %}
  </div>

  <!-- BIBLIOGRAFIA TERMINADO-->
  
  {% if product.product_bibliography %}
  <div>
    <h2>Bibliografía:</h2>
    {% if  product.product_bibliography.studies_tradition_classical_reception %}
      <strong>Estudios de Tradición y Recepción Clásica</strong>
      <p>{{product.product_bibliography.studies_tradition_classical_reception|urlize|linebreaks }}</p>
    {% endif %}
    {% if  product.product_bibliography.other_studies%}
    <strong>Otros estudios</strong>  
     <p>{{ product.product_bibliography.other_studies|urlize|linebreaks }}</p>
    {% endif %}
  </div>
  {% endif %}

{% endblock %}
